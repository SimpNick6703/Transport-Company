{% extends "base.html" %}

{% block title %}Transport Company - Add New Vehicle{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h1>Add New Vehicle</h1>
        <p class="text-muted">Enter vehicle details to add to the fleet</p>
    </div>
    <div class="col-md-4 text-end">
        <a href="{{ url_for('vehicle.list_vehicles') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to List
        </a>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Vehicle Information</h5>
            </div>
            <div class="card-body">
                <form action="{{ url_for('vehicle.create_vehicle') }}" method="post" id="vehicle-form">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="registration_number" class="form-label">Registration Number <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="registration_number" name="registration_number" required>
                        </div>
                        <div class="col-md-6">
                            <label for="vehicle_type" class="form-label">Vehicle Type <span class="text-danger">*</span></label>
                            <select class="form-select" id="vehicle_type" name="vehicle_type" required>
                                <option value="">Select type</option>
                                <option value="car">Car</option>
                                <option value="bus">Bus</option>
                                <option value="truck">Truck</option>
                                <option value="van">Van</option>
                                <option value="motorcycle">Motorcycle</option>
                            </select>
                        </div>
                    </div>                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="model" class="form-label">Model <span class="text-danger">*</span></label>
                            <select class="form-select" id="model" name="model" required>
                                <option value="">Select model</option>
                                <option value="Ambassador">Ambassador</option>
                                <option value="Tata Sumo">Tata Sumo</option>
                                <option value="Maruti Omni">Maruti Omni</option>
                                <option value="Mahindra Bolero">Mahindra Bolero</option>
                                <option value="Tata Indica">Tata Indica</option>
                                <option value="Maruti Swift">Maruti Swift</option>
                                <option value="Hyundai i20">Hyundai i20</option>
                                <option value="Toyota Innova">Toyota Innova</option>
                                <option value="Force Traveller">Force Traveller</option>
                                <option value="Ashok Leyland Dost">Ashok Leyland Dost</option>
                                <option value="Other">Other</option>
                            </select>
                            <input type="text" class="form-control mt-2" id="custom_model" name="custom_model" placeholder="Enter custom model name" style="display: none;">
                        </div>
                        <div class="col-md-6">
                            <label for="year" class="form-label">Year <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="year" name="year" min="1900" max="{{ current_year }}" required>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="capacity" class="form-label">Capacity <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="capacity" name="capacity" step="0.1" min="0" required>
                            <small class="form-text text-muted">Passengers for cars/buses, tons for trucks</small>
                        </div>
                        <div class="col-md-4">
                            <label for="has_ac" class="form-label">AC Status <span class="text-danger">*</span></label>
                            <select class="form-select" id="has_ac" name="has_ac" required>
                                <option value="">Select AC status</option>
                                <option value="true">AC</option>
                                <option value="false">Non-AC</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="fuel_type" class="form-label">Fuel Type <span class="text-danger">*</span></label>
                            <select class="form-select" id="fuel_type" name="fuel_type" required>
                                <option value="">Select fuel type</option>
                                <option value="Petrol">Petrol</option>
                                <option value="Diesel">Diesel</option>
                                <option value="CNG">CNG</option>
                                <option value="Electric">Electric</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="transmission" class="form-label">Transmission <span class="text-danger">*</span></label>
                            <select class="form-select" id="transmission" name="transmission" required>
                                <option value="">Select transmission</option>
                                <option value="Manual">Manual</option>
                                <option value="Automatic">Automatic</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="daily_rate" class="form-label">Daily Rate (₹) <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="daily_rate" name="daily_rate" step="0.01" min="0" required>
                            <small class="form-text text-muted">Legacy field for compatibility</small>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="hourly_rate" class="form-label">Hourly Rate (₹) <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="hourly_rate" name="hourly_rate" step="0.01" min="0" required>
                            <small class="form-text text-muted">Rate per hour (minimum 4 hours)</small>
                        </div>
                        <div class="col-md-6">
                            <label for="per_km_rate" class="form-label">Per KM Rate (₹) <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="per_km_rate" name="per_km_rate" step="0.01" min="0" required>
                            <small class="form-text text-muted">Rate per kilometer driven</small>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="minimum_rental_hours" class="form-label">Minimum Rental Hours</label>
                            <input type="number" class="form-control" id="minimum_rental_hours" name="minimum_rental_hours" value="4" min="1" max="24">
                            <small class="form-text text-muted">Default is 4 hours</small>
                        </div>
                        <div class="col-md-6">
                            <label for="night_charge_multiplier" class="form-label">Night Charge Multiplier</label>
                            <input type="number" class="form-control" id="night_charge_multiplier" name="night_charge_multiplier" value="1.25" step="0.05" min="1.0" max="3.0">
                            <small class="form-text text-muted">Default is 1.25 (25% extra)</small>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status" name="status">
                                <option value="available" selected>Available</option>
                                <option value="maintenance">Maintenance</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="location" class="form-label">Current Location</label>
                            <input type="text" class="form-control" id="location" name="location">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="mileage" class="form-label">Mileage (km)</label>
                            <input type="number" class="form-control" id="mileage" name="mileage" value="0" min="0">
                        </div>
                        <div class="col-md-6">
                            <label for="last_maintenance_date" class="form-label">Last Maintenance Date</label>
                            <input type="date" class="form-control" id="last_maintenance_date" name="last_maintenance_date">
                        </div>
                    </div>

                    <div class="mb-3 text-end">
                        <button type="reset" class="btn btn-secondary">Reset</button>
                        <button type="submit" class="btn btn-primary">Add Vehicle</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Guidance</h5>
            </div>            <div class="card-body">
                <p>Fields marked with <span class="text-danger">*</span> are required.</p>
                
                <h6 class="mt-3">Enhanced Vehicle Features:</h6>
                <ul>
                    <li><strong>AC Status:</strong> Categorize vehicles as AC or Non-AC</li>
                    <li><strong>Dual Pricing:</strong> Set both hourly and per-kilometer rates</li>
                    <li><strong>Minimum Rental:</strong> Default 4-hour minimum booking</li>
                    <li><strong>Night Charges:</strong> 25% extra for night rentals (default)</li>
                </ul>
                
                <h6 class="mt-3">Popular Models:</h6>
                <ul>
                    <li>Ambassador - Classic Indian car</li>
                    <li>Tata Sumo - SUV for group travel</li>
                    <li>Maruti Omni - Van for goods/passengers</li>
                    <li>Mahindra Bolero - Robust SUV</li>
                    <li>Toyota Innova - Premium MPV</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/vehicle.js') }}"></script>
{% endblock %}